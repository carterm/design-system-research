:host {
  /* layout variables */
  --columns-gap: 1.674vw;
  --desktop-max-width: 1920px;
  --mobile-breakpoint-width: 1080px;
  --sidebar-max-width: 15rem;
  --main-content-max-width: 80rem;
  --main-content-left-margin-max-width: 19rem;
  --breakpoint-width-small: 34rem;
  --breakpoint-width-medium: 48rem;
  --breakpoint-width-large: 67rem;
  --flex-grow-max: 9999;

  /* color variables */
  --brand-primary: #13394b;
  --brand-secondary: #0070a3;
  --banner-light: #d5dbde;
  --banner-dark: #09202b;
  --brand-hover-light: #3ca3d3;
  --brand-hover-dark: #246c8e;
  --navigation-hover-light: #1a485e;
  --navigation-hover-dark: #0f3040;
  --background-primary-light: #d9d8cf;
  --background-primary-dark: #43433f;
  --background-secondary-light: #f5f3eb;
  --background-secondary-dark: #65645f;
  --action-primary: #fec335;
  --action-secondary: #fae2ad;
  --action-secondary-hover: #e9d2a1;
  --main-light: #fafafa;
  --main-dark: #242424;
  --navigation-submenu-dark: #6d6d6d;
  --navigation-submenu-light: #dbdbdb;
  --utility-dark: #111;
  --utility-dark-grey: #494949;
  --utility-mid-grey: #929292;
  --utility-light-grey: #b6b6b6;
  --text-dark: #323232;
  --text-light: #fff;
  --hyperlink-light: #0057ad;
  --hyperlink-activated-light: #8a0071;
  --hyperlink-dark: #87cefa;
  --hyperlink-activated-dark: #f692b9;
  --white: #fff;
  --black: #000;

  /* border variables */
  --rounded-buttons: 50px;

  /* spacing variables */
  --space-unit-1: 0.5rem;
  --space-unit-x2: calc(0.5rem * 2);
  --space-unit-x4: calc(0.5rem * 4);
  --space-unit-x8: calc(0.5rem * 8);
  --space-unit-x16: calc(0.5rem * 16);

  /* typography variables */
  --font-family: noto sans;
  --text-max-width: 48rem;
  --font-size-base: 1rem;
  --font-weight-base: 400;
  --line-height-base: 1rem;
  --ratio: 1.24;
  --font-size-base-plus-viewport-adjustment: calc(
    var(--font-size-base) + 0.2vw
  );

  /* standard paragraph font  */
  --p-font-size: calc(
    var(--font-size-base-plus-viewport-adjustment) * var(--ratio)
  );
  --p-line-height: 1.619;

  /* icons */
  --search-icon-light: url("data:image/svg+xml;charset=UTF-8,%3Csvg viewBox='0 0 16.5 16.7' fill='%23FFFFFF' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16.2,15l-4-4c2-2.6,1.8-6.4-0.6-8.8c-1.3-1.3-3-2-4.7-2s-3.4,0.6-4.7,2c-2.6,2.6-2.6,6.9,0,9.5 c1.3,1.3,3,2,4.7,2c1.4,0,2.9-0.4,4-1.4l4,4c0.2,0.2,0.4,0.3,0.6,0.3c0.2,0,0.5-0.1,0.6-0.3C16.5,16,16.5,15.4,16.2,15L16.2,15z M6.8,11.9c-1.3,0-2.5-0.5-3.5-1.4c-1.9-1.9-1.9-5,0-6.9c0.9-0.9,2.1-1.4,3.5-1.4s2.5,0.5,3.5,1.4c0.9,0.9,1.4,2.1,1.4,3.5 s-0.5,2.5-1.4,3.5C9.4,11.4,8.1,11.9,6.8,11.9z'%3E%3C/path%3E%3C/svg%3E");
  --search-icon-dark: url("data:image/svg+xml;charset=UTF-8,%3Csvg viewBox='0 0 16.5 16.7' fill='%23323232' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16.2,15l-4-4c2-2.6,1.8-6.4-0.6-8.8c-1.3-1.3-3-2-4.7-2s-3.4,0.6-4.7,2c-2.6,2.6-2.6,6.9,0,9.5 c1.3,1.3,3,2,4.7,2c1.4,0,2.9-0.4,4-1.4l4,4c0.2,0.2,0.4,0.3,0.6,0.3c0.2,0,0.5-0.1,0.6-0.3C16.5,16,16.5,15.4,16.2,15L16.2,15z M6.8,11.9c-1.3,0-2.5-0.5-3.5-1.4c-1.9-1.9-1.9-5,0-6.9c0.9-0.9,2.1-1.4,3.5-1.4s2.5,0.5,3.5,1.4c0.9,0.9,1.4,2.1,1.4,3.5 s-0.5,2.5-1.4,3.5C9.4,11.4,8.1,11.9,6.8,11.9z'%3E%3C/path%3E%3C/svg%3E");
  --cagov-icon-light: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="32" viewBox="0 0 28 32" fill="none"><path d="M25.9068 27.9804L23.6088 25.2227C21.4918 26.9887 18.7676 28.0513 15.7951 28.0513C9.05442 28.0513 3.58999 22.5869 3.58999 15.8462C3.58999 9.10544 9.05442 3.64101 15.7951 3.64101C18.7676 3.64101 21.4918 4.70357 23.6088 6.46957L25.9068 3.7119C23.1672 1.4264 19.6416 0.0512695 15.7949 0.0512695C7.07161 0.0512695 0 7.12288 0 15.8462C0 24.5694 7.07161 31.6411 15.7949 31.6411C19.6416 31.6411 23.1672 30.2659 25.9068 27.9804Z" fill="%23FFFFFF"/><path d="M27.0018 20.6891C27.6442 19.2044 28.0003 17.5669 28.0003 15.8462C28.0003 12.8516 26.9219 10.1089 25.1322 7.98535C25.1102 7.98774 25.0878 7.99004 25.0654 7.99233C24.9549 8.00367 24.8438 8.01506 24.7741 8.03858C23.6497 8.42009 22.7564 9.46828 22.1607 10.1673C21.911 10.4602 21.7136 10.6918 21.5734 10.7873C21.5153 10.5665 20.8208 9.60004 19.5272 9.60004C18.9542 9.60004 18.5465 9.80828 18.2362 10.1673C17.7336 10.7488 17.5758 11.5887 17.5901 12.0411C17.5971 12.2651 16.3279 12.9568 16.2381 13.0707C16.1043 13.2544 15.8683 13.5276 15.5939 13.8452C15.0382 14.4885 14.325 15.3141 13.9842 15.9483C13.8734 16.1544 13.8865 16.5365 13.8994 16.9116C13.9109 17.2464 13.9222 17.5757 13.8451 17.7696C13.5625 18.4793 12.4875 19.536 11.685 20.3248C11.2274 20.7747 10.8584 21.1375 10.7755 21.299C10.6305 21.6844 13.158 23.8038 14.2262 24.0901C15.2811 24.0901 17.1979 23.768 18.4504 23.5575C18.9431 23.4747 19.333 23.4092 19.5272 23.3874C19.6656 23.3841 19.8741 23.4469 20.1427 23.5278C20.6981 23.6951 21.5106 23.9398 22.4919 23.8382C23.632 23.6016 24.1877 22.8617 24.6953 22.1857C25.043 21.7228 25.3681 21.2899 25.843 21.069C26.1903 20.9073 26.5956 20.7709 27.0018 20.6891Z" fill="%23FFFFFF"/><path d="M10.2865 15.0564C9.79093 14.6829 8.78834 13.9228 8.77314 13.911C8.57755 13.7599 8.57841 13.7611 8.38426 13.9101C7.90247 14.2806 6.90332 15.0561 6.86489 15.0434C6.86489 14.9026 7.27241 13.5727 7.43845 13.0423C7.47115 12.9382 7.43559 12.9018 7.37221 12.8536C6.85342 12.4576 5.78974 11.6387 5.74414 11.5947C5.99852 11.5947 7.33579 11.5628 7.78431 11.5707C7.84482 11.5719 7.89071 11.5677 7.91308 11.4927C8.11641 10.8146 8.3226 10.1373 8.5288 9.45642C8.59161 9.49131 9.01461 10.8428 9.19815 11.4605C9.23085 11.571 9.28275 11.5707 9.36104 11.5707C10.0198 11.5698 10.6782 11.5701 11.3441 11.5701C11.3232 11.6663 9.83223 12.7877 9.74619 12.8533C9.67134 12.9103 9.66589 12.9461 9.69285 13.0326C9.87897 13.634 10.3157 14.9593 10.2862 15.0561L10.2865 15.0564Z" fill="%23FFFFFF"/></svg>');
  --cagov-icon-dark: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="32" viewBox="0 0 28 32" fill="none"><path d="M25.9068 27.9804L23.6088 25.2227C21.4918 26.9887 18.7676 28.0513 15.7951 28.0513C9.05442 28.0513 3.58999 22.5869 3.58999 15.8462C3.58999 9.10544 9.05442 3.64101 15.7951 3.64101C18.7676 3.64101 21.4918 4.70357 23.6088 6.46957L25.9068 3.7119C23.1672 1.4264 19.6416 0.0512695 15.7949 0.0512695C7.07161 0.0512695 0 7.12288 0 15.8462C0 24.5694 7.07161 31.6411 15.7949 31.6411C19.6416 31.6411 23.1672 30.2659 25.9068 27.9804Z" fill="%2313394B"/><path d="M27.0018 20.6891C27.6442 19.2044 28.0003 17.5669 28.0003 15.8462C28.0003 12.8516 26.9219 10.1089 25.1322 7.98535C25.1102 7.98774 25.0878 7.99004 25.0654 7.99233C24.9549 8.00367 24.8438 8.01506 24.7741 8.03858C23.6497 8.42009 22.7564 9.46828 22.1607 10.1673C21.911 10.4602 21.7136 10.6918 21.5734 10.7873C21.5153 10.5665 20.8208 9.60004 19.5272 9.60004C18.9542 9.60004 18.5465 9.80828 18.2362 10.1673C17.7336 10.7488 17.5758 11.5887 17.5901 12.0411C17.5971 12.2651 16.3279 12.9568 16.2381 13.0707C16.1043 13.2544 15.8683 13.5276 15.5939 13.8452C15.0382 14.4885 14.325 15.3141 13.9842 15.9483C13.8734 16.1544 13.8865 16.5365 13.8994 16.9116C13.9109 17.2464 13.9222 17.5757 13.8451 17.7696C13.5625 18.4793 12.4875 19.536 11.685 20.3248C11.2274 20.7747 10.8584 21.1375 10.7755 21.299C10.6305 21.6844 13.158 23.8038 14.2262 24.0901C15.2811 24.0901 17.1979 23.768 18.4504 23.5575C18.9431 23.4747 19.333 23.4092 19.5272 23.3874C19.6656 23.3841 19.8741 23.4469 20.1427 23.5278C20.6981 23.6951 21.5106 23.9398 22.4919 23.8382C23.632 23.6016 24.1877 22.8617 24.6953 22.1857C25.043 21.7228 25.3681 21.2899 25.843 21.069C26.1903 20.9073 26.5956 20.7709 27.0018 20.6891Z" fill="%2313394B"/><path d="M10.2865 15.0564C9.79093 14.6829 8.78834 13.9228 8.77314 13.911C8.57755 13.7599 8.57841 13.7611 8.38426 13.9101C7.90247 14.2806 6.90332 15.0561 6.86489 15.0434C6.86489 14.9026 7.27241 13.5727 7.43845 13.0423C7.47115 12.9382 7.43559 12.9018 7.37221 12.8536C6.85342 12.4576 5.78974 11.6387 5.74414 11.5947C5.99852 11.5947 7.33579 11.5628 7.78431 11.5707C7.84482 11.5719 7.89071 11.5677 7.91308 11.4927C8.11641 10.8146 8.3226 10.1373 8.5288 9.45642C8.59161 9.49131 9.01461 10.8428 9.19815 11.4605C9.23085 11.571 9.28275 11.5707 9.36104 11.5707C10.0198 11.5698 10.6782 11.5701 11.3441 11.5701C11.3232 11.6663 9.83223 12.7877 9.74619 12.8533C9.67134 12.9103 9.66589 12.9461 9.69285 13.0326C9.87897 13.634 10.3157 14.9593 10.2862 15.0561L10.2865 15.0564Z" fill="%2313394B"/></svg>');
  --login-icon-light: url("data:image/svg+xml;charset=UTF-8,%3Csvg viewBox='0 0 32 32' fill='%23FFFFFF' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16,0.4c-8.7,0-15.7,7-15.7,15.7s7,15.7,15.7,15.7s15.7-7,15.7-15.7S24.7,0.4,16,0.4z M16,4 c2.9,0,5.6,2.6,5.6,5.6c0,3-2.6,5.7-5.6,5.6c-2.9,0-5.6-2.6-5.6-5.6C10.4,6.6,13,4,16,4z M16,17.2c4.8,0,9.3,4.5,9.4,10.9 c-2.6,2-5.9,3.3-9.4,3.3c-3.5,0-6.7-1.2-9.3-3.2C6.8,21.7,11.2,17.2,16,17.2z'%3E%3C/path%3E%3C/svg%3E");
  --login-icon-dark: url("data:image/svg+xml;charset=UTF-8,%3Csvg viewBox='0 0 32 32' fill='%2313394B' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16,0.4c-8.7,0-15.7,7-15.7,15.7s7,15.7,15.7,15.7s15.7-7,15.7-15.7S24.7,0.4,16,0.4z M16,4 c2.9,0,5.6,2.6,5.6,5.6c0,3-2.6,5.7-5.6,5.6c-2.9,0-5.6-2.6-5.6-5.6C10.4,6.6,13,4,16,4z M16,17.2c4.8,0,9.3,4.5,9.4,10.9 c-2.6,2-5.9,3.3-9.4,3.3c-3.5,0-6.7-1.2-9.3-3.2C6.8,21.7,11.2,17.2,16,17.2z'%3E%3C/path%3E%3C/svg%3E");

  /* Light Theme variables (default) */
  --background-color: var(--main-light);
  --text-color: var(--text-dark);
  --link-color: var(--hyperlink-light);
  --active-link-color: var(--hyperlink-activated-light);
  --cagov-icon: var(--cagov-icon-dark);
  --search-icon: var(--search-icon-dark);
  --login-icon: var(--login-icon-dark);
  --banner: var(--banner-dark);
  --bg: var(--banner-dark);
  --banner-bg: var(--banner-light);
}

/* Define dark Theme variables */
@media (prefers-color-scheme: dark) {
  :host {
    --background-color: var(--main-dark);
    --text-color: var(--text-light);
    --link-color: var(--hyperlink-dark);
    --active-link-color: var(--hyperlink-activated-dark);
    --cagov-icon: var(--cagov-icon-light);
    --search-icon: var(--search-icon-light);
    --login-icon: var(--login-icon-light);
    --banner: var(--banner-light);
    --bg: var(--banner-light);
    --banner-bg: var(--banner-dark);
  }
}

/* Accessibility */
span.visually-hidden {
  position: absolute !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  width: 1px !important;
  height: 1px !important;
  margin: -1px !important;
  padding: 0 !important;
  white-space: nowrap !important;
  border: 0 !important;
}

header {
  /* stylelint-disable-next-line font-family-name-quotes */
  font-family:
    var(--font-family),
    system-ui,
    -apple-system,
    "Roboto",
    "Helvetica Neue",
    sans-serif;
  font-size: clamp(1rem, var(--p-font-size), 5rem);
  letter-spacing: 0.02rem;
  font-weight: var(--font-weight-base);
  line-height: var(--line-height-base);
  position: relative;
  top: 0;

  @media (min-width: 1080px) {
    position: sticky;
  }

  > div.site-header {
    background-color: var(--banner-bg);

    > div.site-header-container {
      max-width: var(--desktop-max-width);
      margin: 0 auto;
      padding: 0 var(--space-unit-x2);
      display: flex;
      align-items: center;
      gap: var(--space-unit-x4);
      overflow: visible;

      > button.main-navigation-button {
        width: 24px;
        height: 24px;
        cursor: pointer;
        background: transparent;
        border: none;
        padding: 0;
        margin: 0 var(--space-unit-1);

        @media (min-width: 1080px) {
          display: none;
        }

        > div.hamburger {
          height: 4px;
          position: relative;

          /* All 3 lines */
          &,
          &::before,
          &::after {
            width: 100%;
            background-color: var(--bg);
            border-radius: 5px;
            transition: all 200ms ease;
          }

          &::before,
          &::after {
            content: "";
            position: absolute;
            left: 0;
            height: 100%;
          }

          &::before {
            transform: translateY(-7px);
          }

          &::after {
            transform: translateY(7px);
          }
        }

        &.open {
          > div.hamburger {
            transform: rotate(45deg);

            &::before,
            &::after {
              transform: rotate(90deg) translateX(0);
            }
          }
        }
      }

      > a.site-logo {
        display: flex;
        align-items: flex-start;
        gap: var(--space-unit-x4);
        text-decoration: none;

        > img.logo-image {
          max-width: 100%;
          min-height: auto;
          height: clamp(4.5rem, 1.9286rem + 3.8095vw, 6.5rem);
          object-fit: contain;
          transform: translateY(var(--space-unit-x2));
          display: none;

          @media (min-width: 1080px) {
            display: block;
          }

          &.no-overflow {
            transform: translateY(0);
            padding: var(--space-unit-1) 0;
          }
        }

        > div.site-branding-text {
          padding: var(--space-unit-x2) 0;
          color: var(--text-color);

          > span {
            display: block;
            letter-spacing: 1px;

            &.state {
              font-size: clamp(1.5rem, 1.1786rem + 0.4762vw, 1.75rem);
              font-weight: 600;
              margin-top: clamp(0rem, -1.2857rem + 1.9048vw, 1rem);
            }

            &.department {
              font-size: clamp(1rem, 0.6786rem + 0.4762vw, 1.25rem);
              font-weight: 400;
              margin-top: clamp(0.5rem, -0.4643rem + 1.4286vw, 1.25rem);
            }
          }
        }
      }

      > div.site-header-utility {
        margin-left: auto;
        display: flex;
        align-items: flex-end;
        gap: calc(var(--space-unit-x2) / 1.5);

        @media (min-width: 1080px) {
          gap: var(--space-unit-x4);
        }

        > div.search-container-desktop {
          border: 1px solid var(--text-color);
          border-radius: var(--rounded-buttons);
          display: none;

          @media (min-width: 1080px) {
            display: block;
          }

          > form {
            > input.search-input {
              /* Full size search bar */
              outline: 1px solid; /* Needed for Safari */
              border: 0; /* Needed for Safari */
              width: 10rem;
              height: 2rem;
              padding-left: 0.5rem;
              transition: width 300ms ease;

              &::-webkit-search-cancel-button {
                -webkit-appearance: none; /* Remove default styling */
                height: 10px;
                width: 10px;
                background: red; /* Change this to your desired color */
              }
            }

            > button.search-submit {
              /* TODO: Better button style */
              border: 0;
              background: none;
            }

            &:not(:focus-within) {
              /* Shrink into a search icon */
              > input.search-input {
                width: 2rem;
                background: transparent var(--search-icon) no-repeat center /
                  1.125rem;
                cursor: pointer;
                color: transparent;

                &::placeholder {
                  visibility: hidden; /* Hide the search placeholder as an icon */
                }

                &::-webkit-search-cancel-button {
                  display: none; /* Needed for Safari, Chrome clears on blur */
                }
              }

              > button.search-submit {
                display: none;
              }
            }

            &:has(> input.search-input:placeholder-shown) {
              /* Hide the search button when no text entered */
              > button.search-submit {
                display: none;
              }
            }
          }
        }

        > a.login-button {
          background: var(--login-icon) no-repeat center / 2rem;
          padding: var(--space-unit-x2);
          display: block;

          > span.login-text {
            position: absolute;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            width: 1px;
            height: 1px;
            margin: -1px;

            @media (min-width: 1080px) {
              position: relative;
              overflow: visible;
              clip: unset;
              width: unset;
              height: unset;
              margin: unset;
            }
          }

          @media (min-width: 1080px) {
            background: var(--action-secondary);
            border-radius: var(--rounded-buttons);
            padding: var(--space-unit-1)
              calc(var(--space-unit-1) + (30 * ((100vw - 48rem) / 1200)));
            text-decoration: none;
            color: var(--text-dark);
            font-size: 1.125rem;

            &:hover,
            &:focus {
              color: var(--black);
              background-color: var(--action-secondary-hover);
              box-shadow: 0 4px 4px 0 rgb(0 0 0 / 25%);
            }
          }
        }

        > a.cagov-toggle {
          background: transparent var(--cagov-icon) no-repeat center;
          background-size: clamp(2rem, 0.7143rem + 1.9048vw, 3rem)
            clamp(2rem, 0.7143rem + 1.9048vw, 3rem);
          height: clamp(2rem, 0.7143rem + 1.9048vw, 3rem);
          width: clamp(2rem, 0.7143rem + 1.9048vw, 3rem);
          margin-inline-start: clamp(0rem, -11.5714rem + 17.1429vw, 9rem);
        }
      }
    }
  }
}
